(()=>{"use strict";class e{constructor(e,t,i,o){this.title=e,this.author=t,this.pageCount=i,this._isFinishedReading=o,Object.defineProperty(this,"_isFinishedReading",{enumerable:!1})}info(){return`${this.title} by ${this.author}, ${this.pageCount}, ${this.isFinishedReading?"has read":"not read yet"}`}get isFinishedReading(){return this._isFinishedReading?"has read":"not read yet"}}Object.defineProperty(e.prototype,"isFinishedReading",{enumerable:!0});class t{constructor(e){this.bookTable=e,this.bookList=[],document.querySelector(`form[data-related-table-id=${this.bookTable.id}]`).addEventListener("submit",this.addBookToTable.bind(this)),this.bookTable.addEventListener("click",this.removeBookFromTable.bind(this)),this.bookTable.addEventListener("click",this.toggleReadStateInTable.bind(this))}addBook(e){this.bookList.push(e),this.render()}removeBook(e){this.bookList.splice(e,1),this.render()}changeReadState(e){const t=this.bookList[e];t._isFinishedReading=!t._isFinishedReading,this.render()}render(){this.bookTable.tBodies[0].innerHTML="";for(let t=0;t<this.bookList.length;++t){const i=this.bookList[t],o=e(i);o.dataset.finishedReading=i._isFinishedReading,o.dataset.bookId=t,this.bookTable.tBodies[0].append(o)}function e(e){const t=document.createElement("tr");for(const o in e)"function"!=typeof e[o]&&t.append(i(e[o]));return t.append(i("🕮")),t.append(i("❌")),t;function i(e){const t=document.createElement("td");return t.textContent=e,t}}}addBookToTable(t){t.preventDefault();const i=t.target;this.addBook(new e(i.title.value,i.author.value,+i["page-count"].value,i["read-status"].checked)),i.reset()}removeBookFromTable(e){if(!e.target.matches("td:last-child"))return;const t=e.target.parentElement;this.removeBook(t.dataset.bookId)}toggleReadStateInTable(e){if(!e.target.matches("td:nth-last-child(2)"))return;const t=e.target.parentElement;this.changeReadState(t.dataset.bookId)}}!function(){const i=document.querySelector("button.add-new-book"),o=document.querySelector("form.add-new-book");i.addEventListener("click",(()=>{o.style.visibility="visible",o.scrollIntoView({behavior:"smooth"})}));const n=new t(document.querySelector("#simple-library")),s=new e("The Hobbit","J.R.R. Tolkien",295,!1);n.addBook(s)}()})();